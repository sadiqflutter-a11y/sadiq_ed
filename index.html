<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sadiq Space | Ù…Ù†ØµØ© Ø£Ø³ØªØ§Ø°ÙŠ</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #050505;
            color: white;
            scroll-behavior: smooth;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .gradient-text {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }
        
        .btn-primary {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            transition: 0.3s;
            border-radius: 12px;
            color: white;
            border: none;
            cursor: pointer;
        }
        
        .btn-primary:hover:not(:disabled) {
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
        }
        
        .input-clear {
            background-color: white !important;
            color: black !important;
            border: 2px solid #3b82f6;
            padding: 12px;
            border-radius: 12px;
            width: 100%;
            outline: none;
            font-weight: bold;
        }
        
        .teacher-card {
            transition: 0.4s;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 24px;
            position: relative;
        }
        
        #registerModal {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 100;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            align-items: center;
            justify-content: center;
        }
        
        #registerModal.active {
            display: flex;
        }
        
        .modal-content {
            background: #0f0f0f;
            padding: 30px;
            border-radius: 25px;
            width: 95%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid #333;
        }
        
        .support-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 90;
            background: #25d366;
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
            transition: 0.3s;
        }
        
        .star-rating {
            color: #fbbf24;
            display: flex;
            gap: 2px;
            cursor: pointer;
        }
        
        .ads-container {
            margin-top: 100px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        @media (max-width: 768px) {
            .ads-container {
                grid-template-columns: 1fr;
            }
        }
        
        .ad-box {
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .ad-my-channel {
            background: linear-gradient(135deg, #1e3a8a, #4c1d95);
        }
        /* Ø³ØªØ§ÙŠÙ„ Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø£Ø³ØªØ§Ø° Ø§Ù„Ù…Ù…ÙˆÙ„ */
        
        .ad-promoted {
            background: linear-gradient(135deg, #854d0e, #422006);
            border: 1px solid #fbbf24;
            position: relative;
            overflow: hidden;
        }
        
        .ad-promoted::after {
            content: "Ø¥Ø¹Ù„Ø§Ù† Ù…Ù…ÙˆÙ„";
            position: absolute;
            top: 5px;
            left: 5px;
            background: #fbbf24;
            color: black;
            font-size: 8px;
            padding: 2px 5px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .pulse {
            animation: pulse-light 2s infinite;
        }
        
        @keyframes pulse-light {
            0% {
                opacity: 0.8;
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0.8;
            }
        }
    </style>
</head>

<body>

    <a href="#" id="adminSupportLink" target="_blank" class="support-btn text-xs md:text-sm">
        <i class="fab fa-whatsapp text-lg"></i> Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ (ØµØ§Ø¯Ù‚)
    </a>

    <nav class="fixed w-full z-50 px-6 py-4">
        <div class="max-w-6xl mx-auto glass rounded-2xl p-4 flex justify-between items-center shadow-2xl">
            <div class="text-xl font-bold italic text-white cursor-pointer" onclick="showAdminPanel()">Sadiq <span class="text-blue-500 text-sm">Space</span></div>
            <div class="flex gap-2">
                <button onclick="checkAndEdit()" class="bg-white/10 hover:bg-white/20 px-4 py-2 rounded-xl text-xs md:text-sm font-bold transition-all">ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙŠ</button>
                <button onclick="openAddModal()" class="btn-primary px-4 py-2 text-xs md:text-sm font-bold">ØªØ³Ø¬ÙŠÙ„ Ù…Ø¯Ø±Ø³</button>
            </div>
        </div>
    </nav>

    <div class="px-6">
        <div class="max-w-6xl mx-auto ads-container">
            <div class="ad-box ad-my-channel">
                <p class="text-white font-bold mb-2 text-xs md:text-sm">ğŸ“¢ ØªØ§Ø¨Ø¹ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø±Ø³Ù…ÙŠØ©</p>
                <a href="https://whatsapp.com/channel/0029VbC2yvIFy727SBwrto2n" target="_blank" class="bg-white text-blue-900 px-6 py-1 rounded-full font-bold text-[10px] md:text-xs">Ø§Ù†Ø¶Ù… Ù„Ù„Ù‚Ù†Ø§Ø©</a>
            </div>

            <div class="ad-box ad-promoted">
                <p class="text-yellow-200 font-bold mb-1 text-xs md:text-sm pulse">Ø¹Ø§Ø¬Ù„: Ø¨Ø§Ù…ÙƒØ§Ù†Ùƒ Ø§Ù„Ø§Ù† Ø§Ù„Ø§Ø¹Ù„Ø§Ù†</p>
                <p class="text-white text-[10px] md:text-xs mb-2">Ù†Ø²Ù„ Ø§Ù„Ø¢Ù† Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…Ø±ÙƒØ²Ø© Ø¹Ù„Ù‰ Ù‚Ù†Ø§ØªÙ‡</p>
                <a href="https://api.whatsapp.com/send?phone=9647725889250" target="_blank" class="bg-yellow-500 text-black px-4 py-1 rounded-full font-bold text-[10px] hover:bg-white transition-all">ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø£Ø³ØªØ§Ø° / Ø£Ø¹Ù„Ù† Ù‡Ù†Ø§</a>
            </div>
        </div>
    </div>

    <header class="pt-10 pb-10 px-6 text-center">
        <h1 class="text-4xl md:text-7xl font-extrabold mb-6 tracking-tight">Ù…Ø¯Ø±Ø³Ùƒ.. <span class="gradient-text">ØµØ§Ø± Ø¨ÙØ±Ø¹ÙƒÙ…</span></h1>
        <p class="text-gray-400 max-w-2xl mx-auto mb-10 text-lg leading-relaxed">Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠÙ† Ø§Ù„Ø£Ù‚Ø±Ø¨ Ù„Ù…Ù†Ø²Ù„Ùƒ.</p>
    </header>

    <section class="py-10 px-6 max-w-6xl mx-auto">
        <div class="glass p-6 rounded-3xl border-2 border-blue-500/20 mb-10 shadow-2xl">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div>
                    <label class="block text-xs text-gray-500 mb-2 mr-1">1. Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</label>
                    <select id="filterCity" class="input-clear" onchange="updateAreaOptions('filterArea', this.value); filterTeachers();">
                        <option value="">ÙƒÙ„ Ø§Ù„Ø¹Ø±Ø§Ù‚</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs text-gray-500 mb-2 mr-1">2. Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label>
                    <select id="filterArea" class="input-clear" onchange="filterTeachers()">
                        <option value="">ÙƒÙ„ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs text-gray-500 mb-2 mr-1">3. Ø§Ù„Ù…Ø§Ø¯Ø©</label>
                    <select id="filterSubject" class="input-clear" onchange="filterTeachers()">
                        <option value="">ÙƒÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯</option>
                        <option value="Ø±ÙŠØ§Ø¶ÙŠØ§Øª">Ø±ÙŠØ§Ø¶ÙŠØ§Øª</option><option value="ÙÙŠØ²ÙŠØ§Ø¡">ÙÙŠØ²ÙŠØ§Ø¡</option>
                        <option value="ÙƒÙŠÙ…ÙŠØ§Ø¡">ÙƒÙŠÙ…ÙŠØ§Ø¡</option><option value="Ø£Ø­ÙŠØ§Ø¡">Ø£Ø­ÙŠØ§Ø¡</option>
                        <option value="Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©">Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©</option><option value="Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©">Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs text-gray-500 mb-2 mr-1">Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…</label>
                    <input type="text" id="searchKeyword" class="input-clear" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ù‡Ù†Ø§..." onkeyup="filterTeachers()">
                </div>
            </div>
        </div>

        <div class="flex items-center gap-4 mb-8">
            <h2 id="resultsHeader" class="text-2xl font-bold text-white">Ù†Ø®Ø¨Ø© Ù…Ø¯Ø±Ø³ÙŠ Ø§Ù„Ø¹Ø±Ø§Ù‚</h2>
            <span id="teacherCount" class="bg-blue-600/20 text-blue-400 px-3 py-1 rounded-full text-sm font-bold border border-blue-500/20">0</span>
            <div class="flex-1 h-[1px] bg-white/10"></div>
        </div>

        <div id="teachersList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </section>

    <div id="registerModal">
        <div class="modal-content text-right relative">
            <div class="flex justify-between items-center mb-6">
                <h2 id="modalTitle" class="text-xl font-bold text-blue-400">Ø³Ø¬Ù„ ÙƒØ£Ø³ØªØ§Ø° ÙÙŠ Ø§Ù„Ù…Ù†ØµØ©</h2>
                <button onclick="toggleModal(false)" class="text-gray-400 text-2xl">âœ•</button>
            </div>
            <input type="hidden" id="editKey">
            <div class="space-y-4">
                <input type="text" id="tName" class="input-clear" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
                <input type="text" id="tSubject" class="input-clear" placeholder="Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©">
                <select id="tCity" class="input-clear" onchange="updateAreaOptions('tArea', this.value)">
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</option>
                </select>
                <select id="tArea" class="input-clear">
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</option>
                </select>
                <input type="tel" id="tPhone" class="input-clear" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ (11 Ø±Ù‚Ù…)" maxlength="11">
                <input type="text" id="tTelegram" class="input-clear" placeholder="Ù…Ø¹Ø±Ù Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… (Ø¨Ø¯ÙˆÙ† @)">
                <input type="password" id="tPin" class="input-clear" placeholder="Ø±Ù…Ø² PIN Ø®Ø§Øµ Ø¨Ùƒ">
                <textarea id="tPackage" class="input-clear" rows="3" placeholder="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±Ø© (Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ Ø§Ù„Ø³Ø¹Ø±ØŒ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª)..."></textarea>
                <button id="publishBtn" onclick="saveTeacher()" class="btn-primary w-full py-3 font-bold">Ù†Ø´Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</button>
            </div>
        </div>
    </div>

    <script>
        const myWhatsAppNumber = "9647725889250";
        document.getElementById('adminSupportLink').href = `https://api.whatsapp.com/send?phone=${myWhatsAppNumber}&text=Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø£Ø³ØªØ§Ø° ØµØ§Ø¯Ù‚ØŒ Ø£Ø­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø©.`;

        const areasData = {
            "Ø¨ØºØ¯Ø§Ø¯": ["Ø§Ù„ÙƒØ±Ø§Ø¯Ø©", "Ø§Ù„Ù…Ù†ØµÙˆØ±", "Ø§Ù„Ø£Ø¹Ø¸Ù…ÙŠØ©", "Ø§Ù„Ø¯ÙˆØ±Ø©", "Ø¨ØºØ¯Ø§Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©", "Ø§Ù„Ø´Ø¹Ø¨", "Ø§Ù„ÙƒØ§Ø¸Ù…ÙŠØ©", "Ø§Ù„Ø­Ø§Ø±Ø«ÙŠØ©", "Ø§Ù„Ø³ÙŠØ¯ÙŠØ©", "Ø²ÙŠÙˆÙ†Ø©"],
            "Ø§Ù„Ø¨ØµØ±Ø©": ["Ø§Ù„Ø¬Ø¨ÙŠÙ„Ø©", "Ø§Ù„Ù‚Ø¨Ù„Ø©", "Ø§Ù„Ø¹Ø´Ø§Ø±", "Ø§Ù„Ø²Ø¨ÙŠØ±", "Ø£Ø¨ÙŠ Ø§Ù„Ø®ØµÙŠØ¨", "Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ", "Ø§Ù„Ø·ÙˆÙŠØ³Ø©", "Ø§Ù„Ø­ÙƒÙŠÙ…ÙŠØ©", "Ø®Ù…Ø³Ø© Ù…ÙŠÙ„", "Ø§Ù„Ù…Ø¹Ù‚Ù„", "Ø§Ù„Ù‡Ø§Ø±Ø«Ù‡", "Ø§Ù„Ø¯ÙŠØ±"],
            "Ù†ÙŠÙ†ÙˆÙ‰": ["Ø§Ù„Ø²Ù‡ÙˆØ±", "Ø§Ù„Ù…Ø«Ù†Ù‰", "Ø§Ù„Ù…ÙˆØµÙ„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©", "Ø­ÙŠ Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ", "Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø£ÙŠØ³Ø±", "Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø£ÙŠÙ…Ù†", "ØªÙ„Ø¹ÙØ±"],
            "Ù…ÙŠØ³Ø§Ù†": ["Ø§Ù„Ø¹Ù…Ø§Ø±Ø© - Ø§Ù„Ù…Ø±ÙƒØ²", "Ø­ÙŠ Ø§Ù„Ø­Ø³ÙŠÙ†", "Ù‚Ù„Ø¹Ø© ØµØ§Ù„Ø­", "Ø§Ù„Ù…Ø¬Ø± Ø§Ù„ÙƒØ¨ÙŠØ±"],
            "Ø°ÙŠ Ù‚Ø§Ø±": ["Ø§Ù„Ù†Ø§ØµØ±ÙŠØ© - Ø§Ù„Ù…Ø±ÙƒØ²", "Ø§Ù„Ø´Ø·Ø±Ø©", "Ø§Ù„Ø±ÙØ§Ø¹ÙŠ", "Ø³ÙˆÙ‚ Ø§Ù„Ø´ÙŠÙˆØ®", "Ø­ÙŠ Ø£ÙˆØ±"],
            "Ø§Ù„Ù†Ø¬Ù": ["Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©", "Ø­ÙŠ Ø§Ù„Ø£Ù…ÙŠØ±", "Ø­ÙŠ Ø§Ù„Ø¹Ø¯Ø§Ù„Ø©", "Ø§Ù„ÙƒÙˆÙØ©", "Ø§Ù„Ù…Ù†Ø§Ø°Ø±Ø©"],
            "ÙƒØ±Ø¨Ù„Ø§Ø¡": ["Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©", "Ø­ÙŠ Ø§Ù„Ø­Ø³ÙŠÙ†", "Ø­ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†", "Ø§Ù„Ù‡Ù†Ø¯ÙŠØ©", "Ø¹ÙŠÙ† Ø§Ù„ØªÙ…Ø±"],
            "Ø¨Ø§Ø¨Ù„": ["Ø§Ù„Ø­Ù„Ø© - Ø§Ù„Ù…Ø±ÙƒØ²", "Ø§Ù„Ù‚Ø§Ø³Ù…", "Ø§Ù„Ù…Ø­Ø§ÙˆÙŠÙ„", "Ø§Ù„Ù…Ø³ÙŠØ¨", "Ø­ÙŠ Ø¨Ø§Ø¨Ù„"],
            "ÙˆØ§Ø³Ø·": ["Ø§Ù„ÙƒÙˆØª - Ø§Ù„Ù…Ø±ÙƒØ²", "Ø­ÙŠ Ø§Ù„ÙƒÙØ§Ø¡Ø§Øª", "Ø§Ù„Ø¹Ø²ÙŠØ²ÙŠØ©", "Ø§Ù„ØµÙˆÙŠØ±Ø©"],
            "Ø§Ù„Ø£Ù†Ø¨Ø§Ø±": ["Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ", "Ø§Ù„ÙÙ„ÙˆØ¬Ø©", "Ù‡ÙŠØª", "Ø§Ù„Ù‚Ø§Ø¦Ù…", "Ø­ÙŠ Ø§Ù„Ø£Ù†Ø¯Ù„Ø³"],
            "Ø¯ÙŠØ§Ù„Ù‰": ["Ø¨Ø¹Ù‚ÙˆØ¨Ø© - Ø§Ù„Ù…Ø±ÙƒØ²", "Ø§Ù„Ù…Ù‚Ø¯Ø§Ø¯ÙŠØ©", "Ø®Ø§Ù† Ø¨Ù†ÙŠ Ø³Ø¹Ø¯", "Ø¨Ù„Ø¯Ø±ÙˆØ²"],
            "ÙƒØ±ÙƒÙˆÙƒ": ["Ø·Ø±ÙŠÙ‚ Ø¨ØºØ¯Ø§Ø¯", "Ø­ÙŠ Ø§Ù„ÙˆØ§Ø³Ø·ÙŠ", "Ù„ÙŠÙ„Ø§Ù†", "Ø§Ù„Ø­ÙˆÙŠØ¬Ø©"],
            "ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ†": ["ØªÙƒØ±ÙŠØª", "Ø³Ø§Ù…Ø±Ø§Ø¡", "Ø¨Ù„Ø¯", "Ø§Ù„Ø¶Ù„ÙˆØ¹ÙŠØ©"],
            "Ø§Ù„Ù…Ø«Ù†Ù‰": ["Ø§Ù„Ø³Ù…Ø§ÙˆØ© - Ø§Ù„Ù…Ø±ÙƒØ²", "Ø§Ù„Ø±Ù…ÙŠØ«Ø©", "Ø§Ù„Ø®Ø¶Ø±"],
            "Ø§Ù„Ù‚Ø§Ø¯Ø³ÙŠØ©": ["Ø§Ù„Ø¯ÙŠÙˆØ§Ù†ÙŠØ© - Ø§Ù„Ù…Ø±ÙƒØ²", "Ø¹ÙÙƒ", "Ø§Ù„Ø´Ø§Ù…ÙŠØ©"],
            "Ø£Ø±Ø¨ÙŠÙ„": ["Ø§Ù„Ù…Ø±ÙƒØ²", "Ø¹ÙŠÙ†ÙƒØ§ÙˆØ©", "Ø³ÙˆØ±Ø§Ù†"],
            "Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©": ["Ø§Ù„Ù…Ø±ÙƒØ²", "Ø±Ø§Ù†ÙŠØ©", "Ø¯ÙˆÙƒØ§Ù†"],
            "Ø¯Ù‡ÙˆÙƒ": ["Ø§Ù„Ù…Ø±ÙƒØ²", "Ø²Ø§Ø®Ùˆ", "Ø¹Ù…Ø§Ø¯ÙŠØ©"]
        };

        const firebaseConfig = {
            apiKey: "AIzaSyB95_E_iuE-b4n2popl0clVJv06l7B4L-s",
            authDomain: "mycourseapp-4a90a.firebaseapp.com",
            projectId: "mycourseapp-4a90a",
            storageBucket: "mycourseapp-4a90a.firebasestorage.app",
            messagingSenderId: "1062211249999",
            appId: "1:1062211249999:web:fbbc22442939638b79c73a"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        let allTeachersRaw = {};

        function initDropdowns() {
            const cityFilters = [document.getElementById('filterCity'), document.getElementById('tCity')];
            cityFilters.forEach(select => {
                Object.keys(areasData).sort().forEach(city => {
                    let opt = new Option(city, city);
                    select.add(opt);
                });
            });
        }
        initDropdowns();

        function updateAreaOptions(targetId, city) {
            const areaSelect = document.getElementById(targetId);
            areaSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</option>';
            if (areasData[city]) {
                areasData[city].sort().forEach(area => {
                    let opt = new Option(area, area);
                    areaSelect.add(opt);
                });
            }
            if (city !== "") {
                let otherOpt = new Option("Ø£Ø®Ø±Ù‰ (Ø§ÙƒØªØ¨ Ù…Ù†Ø·Ù‚ØªÙƒ ÙŠØ¯ÙˆÙŠØ§Ù‹)", "other_custom");
                areaSelect.add(otherOpt);
            }
        }

        db.ref('teachers').on('value', (s) => {
            allTeachersRaw = s.val() || {};
            filterTeachers();
        });

        function saveTeacher() {
            const key = document.getElementById('editKey').value;
            const data = {
                name: document.getElementById('tName').value.trim(),
                subject: document.getElementById('tSubject').value.trim(),
                city: document.getElementById('tCity').value,
                area: document.getElementById('tArea').value,
                phone: document.getElementById('tPhone').value.trim(),
                telegram: document.getElementById('tTelegram').value.trim(),
                pin: document.getElementById('tPin').value.trim(),
                package: document.getElementById('tPackage').value.trim()
            };
            if (!data.name || !data.subject || !data.city || !data.area || data.phone.length !== 11 || !data.pin || !data.package) {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©.");
                return;
            }
            const ref = key ? db.ref('teachers/' + key) : db.ref('teachers').push();
            ref.update(data).then(() => {
                alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!");
                toggleModal(false);
            });
        }

        function filterTeachers() {
            const city = document.getElementById('filterCity').value;
            const area = document.getElementById('filterArea').value;
            const sub = document.getElementById('filterSubject').value;
            const keyw = document.getElementById('searchKeyword').value.toLowerCase();
            const arr = Object.entries(allTeachersRaw).map(([k, v]) => ({...v,
                    id: k
                }))
                .filter(t => (city === "" || t.city === city) && (area === "" || t.area === area) && (sub === "" || t.subject.includes(sub)) && (t.name.toLowerCase().includes(keyw)));
            document.getElementById('teacherCount').innerText = arr.length;
            displayTeachers(arr);
        }

        function displayTeachers(data) {
            const list = document.getElementById('teachersList');
            list.innerHTML = data.length ? '' : '<p class="col-span-full text-center text-gray-500 py-10">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø¨Ø­Ø« Ø­Ø§Ù„ÙŠØ§Ù‹.</p>';
            data.reverse().forEach(t => {
                        const p = t.phone.startsWith('0') ? '964' + t.phone.substring(1) : t.phone;
                        const rating = t.stars ? (t.stars / t.voters).toFixed(1) : "0.0";
                        const voters = t.voters || 0;

                        list.innerHTML += `
                    <div class="teacher-card text-right">
                        <div class="flex justify-between items-start mb-4">
                             <div class="text-[10px] text-blue-400 font-bold">${t.city} â€¢ ${t.area}</div>
                             <div class="star-rating" onclick="rateTeacher('${t.id}')">
                                <span class="text-xs text-gray-400 ml-1">(${voters})</span>
                                <span class="text-sm font-bold ml-1">${rating}</span>
                                <i class="fas fa-star"></i>
                             </div>
                        </div>
                        <h3 class="font-bold text-xl mb-1">${t.name}</h3>
                        <p class="text-blue-500 font-bold text-sm mb-4">${t.subject}</p>
                        <div class="bg-white/5 p-4 rounded-xl text-xs text-gray-400 mb-6 min-h-[80px] whitespace-pre-line">${t.package}</div>
                        <div class="flex flex-wrap gap-2">
                            <a href="https://api.whatsapp.com/send?phone=${p}" target="_blank" class="flex-1 text-center py-3 bg-green-600/20 text-green-400 rounded-xl text-xs font-bold"><i class="fab fa-whatsapp"></i> ÙˆØ§ØªØ³Ø§Ø¨</a>
                            ${t.telegram ? `<a href="https://t.me/${t.telegram}" target="_blank" class="flex-1 text-center py-3 bg-blue-600/20 text-blue-400 rounded-xl text-xs font-bold"><i class="fab fa-telegram"></i> ØªÙ„ÙŠØ¬Ø±Ø§Ù…</a>` : ''}
                            <a href="tel:${t.phone}" class="w-12 flex items-center justify-center bg-gray-600/20 text-white rounded-xl"><i class="fas fa-phone"></i></a>
                        </div>
                    </div>`;      
            });    
        }

        function rateTeacher(id) {
            const stars = prompt("Ù‚ÙŠÙ… Ø§Ù„Ø£Ø³ØªØ§Ø° Ù…Ù† 1 Ø¥Ù„Ù‰ 5 Ù†Ø¬ÙˆÙ…:");
            const val = parseInt(stars);
            if (val >= 1 && val <= 5) {
                const t = allTeachersRaw[id];
                const newStars = (t.stars || 0) + val;
                const newVoters = (t.voters || 0) + 1;
                db.ref('teachers/' + id).update({ stars: newStars, voters: newVoters });
                alert("Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙ‚ÙŠÙŠÙ…Ùƒ!");
            } else if(stars) {
                alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø¨ÙŠÙ† 1 Ùˆ 5");
            }
        }

        function toggleModal(show) { document.getElementById('registerModal').classList.toggle('active', show); }

        function openAddModal() {      
            document.getElementById('editKey').value = "";      
            ['tName', 'tSubject', 'tPhone', 'tTelegram', 'tPin', 'tPackage', 'tCity', 'tArea'].forEach(f => document.getElementById(f).value = "");      
            toggleModal(true);    
        }

        function checkAndEdit() {      
            const phone = prompt("Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ:");      
            const found = Object.entries(allTeachersRaw).find(([k, v]) => v.phone === phone);      
            if (found && prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²:") === found[1].pin) {        
                const [key, data] = found;        
                const action = confirm("ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚! Ù…ÙˆØ§ÙÙ‚ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ØŒ Ø¥Ù„ØºØ§Ø¡ Ù„Ù„Ø­Ø°Ù.");
                if (action) {
                    document.getElementById('editKey').value = key;        
                    document.getElementById('tName').value = data.name;        
                    document.getElementById('tSubject').value = data.subject;        
                    document.getElementById('tCity').value = data.city;        
                    updateAreaOptions('tArea', data.city);        
                    document.getElementById('tArea').value = data.area;        
                    document.getElementById('tPhone').value = data.phone;        
                    document.getElementById('tTelegram').value = data.telegram || "";        
                    document.getElementById('tPin').value = data.pin;        
                    document.getElementById('tPackage').value = data.package;        
                    toggleModal(true);        
                } else {
                    if (confirm("Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ")) db.ref('teachers/' + key).remove();
                }
            } else { alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©!"); }    
        }

        function showAdminPanel() {      
            if (prompt("Ø±Ù…Ø² Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:") === "2026") {        
                let msg = "";        
                Object.values(allTeachersRaw).forEach(t => msg += `${t.name}: ${t.pin}\n`);        
                alert(msg);      
            }    
        }
    </script>
</body>

</html>